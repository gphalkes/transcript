- for shared library format (which should be the only format) we should consider
  the following:
  - make a function get_convertor_type, which will indicate what the interface
    will be
  - for SBC, we should use a two-level trie, with 5 bit steps for the Unicode
    to codepage conversion. This gives a small file and good look-up speed.
	Using a fixed parameter trie is makes the implementation faster and we can
	more easily encorporate it in the ucm2cct code. Finally, we should only do
	this for codepages which map to the BMP (which is all of them, but we should
	check).
  - for larger codepages, we should use the scheme we have now, but include the
    full states. This will allow best memory sharing, at the expense of some
	disk space.
  - to get the tables, use a function which can be different for the different
	supported table types (at least the return value should be different).


- if we use zlib/lzo for compression, then we can optimize our tables for
  in-memory size. This makes the state machine minimization easier. On the
  other hand, that would introduce a dependency which we may want to avoid, and
  disk space is not expensive.
- perhaps it is a good idea to save the data such that we can simply use a
  read-only mmap and a small set of pointers into the file.
- allow extra initial states only if the MULTIBYTE_START_STATE_1 flag is also
  set
- for large tables it is useful to create a shared library format such that
  the data can be shared between processes. For single byte tables the
  resulting shared library will be so much larger than the cct file that it
  makes little sense, unless we bunch several together (the overhead is ~6KB).

- when a variant contains a |1 or |3 mapping, it must also contain the |0
  mapping
- The following checks have to be implemented:
	- for each |3 fallback there is at least a |0 mapping as well
	- for each |1 fallback there is at least a |0 mapping as well
	- the above must hold for variants as well
	- the subchar and subchar1 characters may not appear in variants for
		to_unicode mappings.

Conversion issues:
- fullwidth to half-width fallbacks and vice-versa
- what to do with the mu versus micro sign? In latin-1 the character is the mu
  sign, but when then converting to code page 437 we have a problem (if we consider
  that the mu in there is the greek letter).
  See the wikipedia page on code page 437: http://en.wikipedia.org/wiki/Codepage_437
  especially the section on "Multiple-meaning character glyphs". In case of the
  micro sign, I think choosing the micro sign is best because it maps best to
  latin-1, and everyone else is doing that as well. The others are less relevant.
  We could add 03B5 -> E6 as fallback.
